{"ast":null,"code":"\"use client\";import _objectSpread from\"/Users/sonamzangmo/Desktop/WEB_Final_Project_Youtube/youtube-clone/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import\"./Register.css\";import{useAuth}from\"../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){const[formData,setFormData]=useState({username:\"\",email:\"\",password:\"\",confirmPassword:\"\",firstName:\"\",lastName:\"\",isCreator:false});const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});const{register}=useAuth();const navigate=useNavigate();// Handle input changes\nconst handleChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type===\"checkbox\"?checked:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:\"\"}));}};// Validate form\nconst validateForm=()=>{const newErrors={};if(!formData.firstName.trim()){newErrors.firstName=\"First name is required\";}if(!formData.lastName.trim()){newErrors.lastName=\"Last name is required\";}if(!formData.username.trim()){newErrors.username=\"Username is required\";}else if(formData.username.length<3){newErrors.username=\"Username must be at least 3 characters\";}else if(!/^[a-zA-Z0-9_]+$/.test(formData.username)){newErrors.username=\"Username can only contain letters, numbers, and underscores\";}if(!formData.email){newErrors.email=\"Email is required\";}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email=\"Email is invalid\";}if(!formData.password){newErrors.password=\"Password is required\";}else if(formData.password.length<6){newErrors.password=\"Password must be at least 6 characters\";}if(!formData.confirmPassword){newErrors.confirmPassword=\"Please confirm your password\";}else if(formData.password!==formData.confirmPassword){newErrors.confirmPassword=\"Passwords do not match\";}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}try{setLoading(true);// Prepare user data (exclude confirmPassword)\nconst userData={username:formData.username,email:formData.email,password:formData.password,firstName:formData.firstName,lastName:formData.lastName,isCreator:formData.isCreator};await register(userData);// Redirect to home page\nnavigate(\"/\");}catch(error){console.error(\"Registration failed:\",error);setErrors({submit:error.message});}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"register\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register__header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"register__title\",children:\"Create your account\"}),/*#__PURE__*/_jsx(\"p\",{className:\"register__subtitle\",children:\"Join YouTube today\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"register__form\",onSubmit:handleSubmit,children:[errors.submit&&/*#__PURE__*/_jsx(\"div\",{className:\"register__error-message\",children:errors.submit}),/*#__PURE__*/_jsxs(\"div\",{className:\"register__row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",className:\"register__label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"firstName\",name:\"firstName\",value:formData.firstName,onChange:handleChange,className:\"register__input \".concat(errors.firstName?\"register__input--error\":\"\"),placeholder:\"Enter your first name\",disabled:loading}),errors.firstName&&/*#__PURE__*/_jsx(\"span\",{className:\"register__field-error\",children:errors.firstName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",className:\"register__label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lastName\",name:\"lastName\",value:formData.lastName,onChange:handleChange,className:\"register__input \".concat(errors.lastName?\"register__input--error\":\"\"),placeholder:\"Enter your last name\",disabled:loading}),errors.lastName&&/*#__PURE__*/_jsx(\"span\",{className:\"register__field-error\",children:errors.lastName})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"register__label\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",value:formData.username,onChange:handleChange,className:\"register__input \".concat(errors.username?\"register__input--error\":\"\"),placeholder:\"Choose a username\",disabled:loading}),errors.username&&/*#__PURE__*/_jsx(\"span\",{className:\"register__field-error\",children:errors.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"register__label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:\"register__input \".concat(errors.email?\"register__input--error\":\"\"),placeholder:\"Enter your email\",disabled:loading}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"register__field-error\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register__row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"register__label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,className:\"register__input \".concat(errors.password?\"register__input--error\":\"\"),placeholder:\"Create a password\",disabled:loading}),errors.password&&/*#__PURE__*/_jsx(\"span\",{className:\"register__field-error\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"register__label\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange,className:\"register__input \".concat(errors.confirmPassword?\"register__input--error\":\"\"),placeholder:\"Confirm your password\",disabled:loading}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"span\",{className:\"register__field-error\",children:errors.confirmPassword})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"register__checkbox-field\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"register__checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"isCreator\",checked:formData.isCreator,onChange:handleChange,className:\"register__checkbox\",disabled:loading}),/*#__PURE__*/_jsx(\"span\",{className:\"register__checkbox-text\",children:\"I want to create and upload content (Creator account)\"})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"register__submit-btn\",disabled:loading,children:loading?\"Creating account...\":\"Create account\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"register__footer\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"register__footer-text\",children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"register__footer-link\",children:\"Sign in\"})]})})]})});}export default Register;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}