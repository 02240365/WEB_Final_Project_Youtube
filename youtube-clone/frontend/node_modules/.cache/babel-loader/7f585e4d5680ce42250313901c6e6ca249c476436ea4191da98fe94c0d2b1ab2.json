{"ast":null,"code":"\"use client\";import _objectSpread from\"/Users/sonamzangmo/Desktop/WEB_Final_Project_Youtube/youtube-clone/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import\"./Login.css\";import{useAuth}from\"../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _location$state,_location$state$from;const[formData,setFormData]=useState({email:\"\",password:\"\"});const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});const{login}=useAuth();const navigate=useNavigate();const location=useLocation();// Get the intended destination or default to home\nconst from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/\";// Handle input changes\nconst handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:\"\"}));}};// Validate form\nconst validateForm=()=>{const newErrors={};if(!formData.email){newErrors.email=\"Email is required\";}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email=\"Email is invalid\";}if(!formData.password){newErrors.password=\"Password is required\";}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}try{setLoading(true);await login(formData.email,formData.password);// Redirect to intended destination\nnavigate(from,{replace:true});}catch(error){console.error(\"Login failed:\",error);setErrors({submit:error.message});}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login__header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"login__title\",children:\"Sign in\"}),/*#__PURE__*/_jsx(\"p\",{className:\"login__subtitle\",children:\"to continue to YouTube\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"login__form\",onSubmit:handleSubmit,children:[errors.submit&&/*#__PURE__*/_jsx(\"div\",{className:\"login__error-message\",children:errors.submit}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"login__label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:\"login__input \".concat(errors.email?\"login__input--error\":\"\"),placeholder:\"Enter your email\",disabled:loading}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"login__field-error\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__field\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"login__label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,className:\"login__input \".concat(errors.password?\"login__input--error\":\"\"),placeholder:\"Enter your password\",disabled:loading}),errors.password&&/*#__PURE__*/_jsx(\"span\",{className:\"login__field-error\",children:errors.password})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login__forgot-password\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"login__forgot-link\",children:\"Forgot password?\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login__submit-btn\",disabled:loading,children:loading?\"Signing in...\":\"Sign in\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login__footer\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"login__footer-text\",children:[\"Don't have an account?\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"login__footer-link\",children:\"Create account\"})]})})]})});}export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}